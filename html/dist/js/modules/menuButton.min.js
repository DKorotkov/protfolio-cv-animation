function menuButton(n){let e=document.querySelector(n.menu),t=e.querySelector(n.button),i=e.querySelector(n.list),o=i.querySelectorAll(n.item),c;function u(e){var t,n;0==i.hidden&&(e.keyCode!==KEY.ENTER&&e.keyCode!==KEY.SPACE||(e.preventDefault(),s(i.getAttribute("selected")-1),r()),e.keyCode===KEY.ESC&&(e.preventDefault(),r())),1==i.hidden&&(t=i.getAttribute("selected"),n=Number(t)-1,e.keyCode===KEY.ARROW_LEFT&&0!=n&&s(n-1),e.keyCode===KEY.ARROW_RIGHT&&t<o.length&&s(Number(t)))}function s(e){i.setAttribute("selected",e+1),o.forEach(e=>{e.setAttribute("tabindex","-1")}),o[e].setAttribute("tabindex","0"),t.textContent=o[e].textContent,c&&c.classList.remove("clipped")}function r(){i.hidden=!0,i.setAttribute("tabindex",""),t.focus(),i.removeEventListener("keydown",u),o.forEach((e,t)=>{e.removeEventListener("click",()=>{s(t),r()}),1==n.collapseOnFocusOut&&e.removeEventListener("focusout",d)})}function d(){setTimeout(function(){document.activeElement.classList.contains(n.item.slice(1))||document.activeElement.classList.contains(n.list.slice(1))||r()},1)}n.label&&(c=e.querySelector(n.label)),rovingTabIndex(n.menu,n.list,n.item,n.roving),t.addEventListener("click",function(){i.hidden=!1,i.setAttribute("tabindex","-1"),o[i.getAttribute("selected")-1].focus(),i.addEventListener("keydown",u),o.forEach((e,t)=>{e.addEventListener("click",()=>{s(t),r()}),1==n.collapseOnFocusOut&&e.addEventListener("focusout",d)})}),t.addEventListener("keydown",u)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlcy9tZW51QnV0dG9uLm1pbi5qcyIsInNvdXJjZXMiOlsibW9kdWxlcy9tZW51QnV0dG9uLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBtZW51QnV0dG9uKG1lbnVCdG4pIHtcclxuICAgbGV0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1lbnVCdG4ubWVudSk7XHJcbiAgIGxldCBidXR0b24gPSBtZW51LnF1ZXJ5U2VsZWN0b3IobWVudUJ0bi5idXR0b24pO1xyXG4gICBsZXQgbGlzdCA9IG1lbnUucXVlcnlTZWxlY3RvcihtZW51QnRuLmxpc3QpO1xyXG4gICBsZXQgaXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwobWVudUJ0bi5pdGVtKTtcclxuICAgbGV0IGxhYmVsO1xyXG4gICBpZiAobWVudUJ0bi5sYWJlbCkgbGFiZWwgPSBtZW51LnF1ZXJ5U2VsZWN0b3IobWVudUJ0bi5sYWJlbCk7XHJcbiAgIHJvdmluZ1RhYkluZGV4KG1lbnVCdG4ubWVudSwgbWVudUJ0bi5saXN0LCBtZW51QnRuLml0ZW0sIG1lbnVCdG4ucm92aW5nKTtcclxuICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuKTtcclxuICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNoZWNrUHJlc3MpO1xyXG5cclxuICAgZnVuY3Rpb24gb3BlbigpIHtcclxuICAgICAgbGlzdC5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgbGlzdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xyXG4gICAgICBpdGVtc1tsaXN0LmdldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIpIC0gMV0uZm9jdXMoKTtcclxuICAgICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjaGVja1ByZXNzKTtcclxuICAgICAgaXRlbXMuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3QoaW5kZXgpO1xyXG4gICAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgICAgaWYgKG1lbnVCdG4uY29sbGFwc2VPbkZvY3VzT3V0ID09IHRydWUpIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIGNoZWNrRm9jdXMpO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgZnVuY3Rpb24gY2hlY2tQcmVzcyhlKSB7XHJcbiAgICAgIGlmIChsaXN0LmhpZGRlbiA9PSBmYWxzZSkge1xyXG4gICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBLRVkuRU5URVIgfHwgZS5rZXlDb2RlID09PSBLRVkuU1BBQ0UpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxlY3QobGlzdC5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKSAtIDEpO1xyXG4gICAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWS5FU0MpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGxpc3QuaGlkZGVuID09IHRydWUpIHtcclxuICAgICAgICAgbGV0IG5fcHJldiA9IGxpc3QuZ2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgIGxldCBuO1xyXG5cclxuICAgICAgICAgbiA9IE51bWJlcihuX3ByZXYpIC0gMTtcclxuICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS0VZLkFSUk9XX0xFRlQpIHtcclxuICAgICAgICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAobiAhPSAwKSBzZWxlY3QobiAtIDEpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWS5BUlJPV19SSUdIVCkge1xyXG4gICAgICAgICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChuX3ByZXYgPCBpdGVtcy5sZW5ndGgpIHNlbGVjdChOdW1iZXIobl9wcmV2KSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBmdW5jdGlvbiBzZWxlY3Qobikge1xyXG4gICAgICBsaXN0LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIG4gKyAxKTtcclxuICAgICAgaXRlbXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpdGVtc1tuXS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XHJcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGl0ZW1zW25dLnRleHRDb250ZW50O1xyXG4gICAgICBpZiAobGFiZWwpIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJjbGlwcGVkXCIpO1xyXG4gICB9XHJcblxyXG4gICBmdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgICAgbGlzdC5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICBsaXN0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiXCIpO1xyXG4gICAgICBidXR0b24uZm9jdXMoKTtcclxuICAgICAgbGlzdC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjaGVja1ByZXNzKTtcclxuICAgICAgaXRlbXMuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3QoaW5kZXgpO1xyXG4gICAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgICAgaWYgKG1lbnVCdG4uY29sbGFwc2VPbkZvY3VzT3V0ID09IHRydWUpIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIGNoZWNrRm9jdXMpO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgZnVuY3Rpb24gY2hlY2tGb2N1cygpIHtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIGlmICghZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMobWVudUJ0bi5pdGVtLnNsaWNlKDEpKSAmJiAhZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMobWVudUJ0bi5saXN0LnNsaWNlKDEpKSkgY2xvc2UoKTtcclxuICAgICAgfSwgMSk7XHJcbiAgIH1cclxufVxyXG5cclxuLy8gbWVudUJ1dHRvbihcclxuLy8gICAgKG1lbnUxID0ge1xyXG4vLyAgICAgICBtZW51OiBcIi5tZW51LWJ1dHRvbl9fcHJpY2VcIiwgLy8g0KPQvdC40LrQsNC70YzQvdGL0Lkg0Y3Qu9C10LzQtdC90YIg0YEg0LrQvtGC0L7RgNGL0Lwg0L3QtdC+0LHRhdC+0LTQuNC80L4g0LLQt9Cw0LjQvNC+0LTQtdC50YHRgtCy0LjQtVxyXG4vLyAgICAgICBidXR0b246IFwiLm1lbnUtYnV0dG9uX19idXR0b25cIiwgLy8g0JPQu9Cw0LLQvdGL0LUg0Y3Qu9C10LzQtdC90YIg0YPQv9GA0LDQstC70LXQvdC40Y8g0LzQtdC90Y5cclxuLy8gICAgICAgbGlzdDogXCIubWVudS1idXR0b25fX21lbnVcIiwgLy8g0JHQu9C+0Log0L7QtNC10YDQttCw0YnQuNC5INGB0L/QuNGB0L7QuiDQstGB0LXRhSDRjdC70LXQvNC10L3RgtC+0LJcclxuLy8gICAgICAgaXRlbTogXCIubWVudS1idXR0b25fX2l0ZW1cIiwgLy8g0K3Qu9C10LzQtdC90YLRiyDQutC+0YLQvtGA0YvQvNC4INCx0YPQtNC10Lwg0YPQv9GA0LDQstC70Y/RgtGMXHJcbi8vICAgICAgIHJvdmluZzogdHJ1ZSwgLy8g0KLRgNC10LHRg9C10YLRgdGPINC70Lgg0L/QvtCy0YLQvtGAINGF0L7QttC00LXQvdC40Y8g0YTQvtC60YPRgdCwINC/0L4g0Y3Qu9C10LzQtdC90YLQsNC8XHJcbi8vICAgICAgIGNvbGxhcHNlT25Gb2N1c091dDogZmFsc2UsIC8vINCi0YDQtdCx0YPQtdGC0YHRjyDQu9C4INC30LDQutGA0YvQstCw0YLRjCDQv9GA0Lgg0L/QvtGC0LXRgNC4INGE0L7QutGD0YHQsFxyXG4vLyAgICAgICBsYWJlbDogXCIubWVudS1idXR0b25fX2xhYmVsXCIsIC8vINC/0L7QtNGB0LrQsNC30LrQsCDQuiDQvNC10L3RjiDQstGL0LHQvtGA0LAgKNC/0L7Rj9Cy0LvRj9C10YLRgdGPINC60L7Qs9C00LAg0LHRi9C7INGB0LTQtdC70LDQvSDQstGL0LHQvtGAKVxyXG4vLyAgICB9KVxyXG4vLyApO1xyXG4iXSwibmFtZXMiOlsibWVudUJ1dHRvbiIsIm1lbnVCdG4iLCJsZXQiLCJtZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uIiwibGlzdCIsIml0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJsYWJlbCIsImNoZWNrUHJlc3MiLCJlIiwibl9wcmV2IiwibiIsImhpZGRlbiIsImtleUNvZGUiLCJLRVkiLCJFTlRFUiIsIlNQQUNFIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3QiLCJnZXRBdHRyaWJ1dGUiLCJjbG9zZSIsIkVTQyIsIk51bWJlciIsIkFSUk9XX0xFRlQiLCJBUlJPV19SSUdIVCIsImxlbmd0aCIsInNldEF0dHJpYnV0ZSIsImZvckVhY2giLCJlbGVtZW50IiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJmb2N1cyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbmRleCIsImNvbGxhcHNlT25Gb2N1c091dCIsImNoZWNrRm9jdXMiLCJzZXRUaW1lb3V0IiwiYWN0aXZlRWxlbWVudCIsImNvbnRhaW5zIiwic2xpY2UiLCJyb3ZpbmdUYWJJbmRleCIsInJvdmluZyIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBQVdDLEdBQ2pCQyxJQUFJQyxFQUFPQyxTQUFTQyxjQUFjSixFQUFRRSxNQUN0Q0csRUFBU0gsRUFBS0UsY0FBY0osRUFBUUssUUFDcENDLEVBQU9KLEVBQUtFLGNBQWNKLEVBQVFNLE1BQ2xDQyxFQUFRRCxFQUFLRSxpQkFBaUJSLEVBQVFTLE1BQ3RDQyxFQW9CSixTQUFTQyxFQUFXQyxHQVlqQixJQUNPQyxFQUdKQyxFQWZnQixHQUFmUixFQUFLUyxTQUNGSCxFQUFFSSxVQUFZQyxJQUFJQyxPQUFTTixFQUFFSSxVQUFZQyxJQUFJRSxRQUM5Q1AsRUFBRVEsaUJBQ0ZDLEVBQU9mLEVBQUtnQixhQUFhLFlBQWMsR0FDdkNDLEtBRUNYLEVBQUVJLFVBQVlDLElBQUlPLE1BQ25CWixFQUFFUSxpQkFDRkcsTUFHYSxHQUFmakIsRUFBS1MsU0FDRkYsRUFBU1AsRUFBS2dCLGFBQWEsWUFHL0JSLEVBQUlXLE9BQU9aLEdBQVUsRUFDakJELEVBQUVJLFVBQVlDLElBQUlTLFlBRVYsR0FBTFosR0FBUU8sRUFBT1AsRUFBSSxHQUV0QkYsRUFBRUksVUFBWUMsSUFBSVUsYUFFZmQsRUFBU04sRUFBTXFCLFFBQVFQLEVBQU9JLE9BQU9aLEtBS2xELFNBQVNRLEVBQU9QLEdBQ2JSLEVBQUt1QixhQUFhLFdBQVlmLEVBQUksR0FDbENQLEVBQU11QixRQUFRLElBQ1hDLEVBQVFGLGFBQWEsV0FBWSxRQUVwQ3RCLEVBQU1PLEdBQUdlLGFBQWEsV0FBWSxLQUNsQ3hCLEVBQU8yQixZQUFjekIsRUFBTU8sR0FBR2tCLFlBQzFCdEIsR0FBT0EsRUFBTXVCLFVBQVVDLE9BQU8sV0FHckMsU0FBU1gsSUFDTmpCLEVBQUtTLFFBQVMsRUFDZFQsRUFBS3VCLGFBQWEsV0FBWSxJQUM5QnhCLEVBQU84QixRQUNQN0IsRUFBSzhCLG9CQUFvQixVQUFXekIsR0FDcENKLEVBQU11QixRQUFRLENBQUNDLEVBQVNNLEtBQ3JCTixFQUFRSyxvQkFBb0IsUUFBUyxLQUNsQ2YsRUFBT2dCLEdBQ1BkLE1BRStCLEdBQTlCdkIsRUFBUXNDLG9CQUE0QlAsRUFBUUssb0JBQW9CLFdBQVlHLEtBSXRGLFNBQVNBLElBQ05DLFdBQVcsV0FDSHJDLFNBQVNzQyxjQUFjUixVQUFVUyxTQUFTMUMsRUFBUVMsS0FBS2tDLE1BQU0sS0FBUXhDLFNBQVNzQyxjQUFjUixVQUFVUyxTQUFTMUMsRUFBUU0sS0FBS3FDLE1BQU0sS0FBS3BCLEtBQzVJLEdBMUVGdkIsRUFBUVUsUUFBT0EsRUFBUVIsRUFBS0UsY0FBY0osRUFBUVUsUUFDdERrQyxlQUFlNUMsRUFBUUUsS0FBTUYsRUFBUU0sS0FBTU4sRUFBUVMsS0FBTVQsRUFBUTZDLFFBQ2pFeEMsRUFBT3lDLGlCQUFpQixRQUd4QixXQUNHeEMsRUFBS1MsUUFBUyxFQUNkVCxFQUFLdUIsYUFBYSxXQUFZLE1BQzlCdEIsRUFBTUQsRUFBS2dCLGFBQWEsWUFBYyxHQUFHYSxRQUN6QzdCLEVBQUt3QyxpQkFBaUIsVUFBV25DLEdBQ2pDSixFQUFNdUIsUUFBUSxDQUFDQyxFQUFTTSxLQUNyQk4sRUFBUWUsaUJBQWlCLFFBQVMsS0FDL0J6QixFQUFPZ0IsR0FDUGQsTUFFK0IsR0FBOUJ2QixFQUFRc0Msb0JBQTRCUCxFQUFRZSxpQkFBaUIsV0FBWVAsT0FabkZsQyxFQUFPeUMsaUJBQWlCLFVBQVduQyJ9
